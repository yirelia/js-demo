<div class="container" id="app"></div>

<style>
  .container {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
</style>
<script>
  /***
   * @description: 最小优先级队列
   *
   *
   * ***/

  class MinPQ {
    constructor() {
      this.pq = [];
      this.n = 0;
    }

    isEmpty() {
      return this.n === 0;
    }

    put(v, priority = 0) {
      this.pq[++this.n] = {
        element: v,
        priority: priority,
      };
      this.swim(this.n);
    }

    greater(i, j) {
      return this.pq[i].priority > this.pq[j].priority;
    }

    exch(i, j) {
      const t = this.pq[i];
      this.pq[i] = this.pq[j];
      this.pq[j] = t;
    }

    swim(k) {
      while (k > 1 && this.greater(Math.floor(k / 2), k)) {
        this.exch(Math.floor(k / 2), k);
        k = Math.floor(k / 2);
      }
    }

    sink(k) {
      while (2 * k <= this.n) {
        let j = 2 * k;
        if (j < this.n && this.greater(j, j + 1)) j++;
        if (!this.greater(k, j)) break;
        this.exch(k, j);
        k = j;
      }
    }
    pop() {
      const min = this.pq[1];
      // 交换第一个元素和最后一个元素
      this.exch(1, this.n--);
      // 删除已取出的元素，
      this.pq[this.n + 1] = null;
      this.sink(1);
      return min;
    }

    printQueue() {
      console.log("Priority Queue:", this.n, this.pq.length);
      let result = [];
      result.push(`Priority Queue: ${this.n}`);
      for (let i = 1; i < this.n; i++) {

        const str = `Element: ${this.pq[i].element}, Priority: ${this.pq[i].priority}`;
        console.log(
          `Element: ${this.pq[i].element}, Priority: ${this.pq[i].priority}`
        );
        result.push(str);
      }
      document.getElementById("app").innerHTML = result.join("<br>");
    }
  }

  const pq = new MinPQ();
  pq.put(`A`, 1);
  pq.put(`B`, 2);
  pq.put(`C`, 3);

  pq.printQueue();

</script>
